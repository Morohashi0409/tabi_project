# GitHub Issues テンプレート - TabiTabi開発課題

要件定義文書と現在の実装との差分分析結果に基づく、優先度付きIssue一覧

## 🚨 高優先度 - Core機能

### Issue #1: Google Maps API統合とゼルダ風マップデザイン実装

**現在の状況:**
- 現在はグリッド表示のみ（src/pages/Map.tsx）
- 実際の地図APIとの連携なし

**要件定義からの引用:**
> - **解禁前**: ゼルダ風の枠線のみ表示（内部は深いブルーでマスク）
> - **解禁後**: Googleマップベースのリアル表示
> - **Google Maps Platform（推奨）**: Maps SDK、Places API、Geocoding API

**受け入れ基準:**
- [ ] Google Maps JavaScript APIの統合
- [ ] 解禁前エリアの深いブルーマスク表示
- [ ] 解禁後エリアのリアル地図表示
- [ ] ゼルダ風のUI/UXデザイン実装

**技術実装:**
```bash
npm install @googlemaps/js-api-loader
```

**ラベル:** `enhancement`, `high-priority`, `core-feature`

---

### Issue #2: 3段階制マップシステム（地方ブロック/都道府県/市町村）

**現在の状況:**
- イージーモード（8地方ブロック）のみ実装
- 都道府県・市町村レベルのデータ構造なし

**要件定義からの引用:**
> 1. **イージーモード（地方ブロック単位）**: 8つの地方ブロック（無料ユーザー向け）
> 2. **ノーマルモード（都道府県単位）**: 47都道府県の詳細解禁（プレミアム限定）  
> 3. **ハードモード（市町村単位）**: 1,741市町村の完全制覇（プレミアム限定）

**受け入れ基準:**
- [ ] 都道府県レベルのデータ構造追加
- [ ] 市町村レベルのデータ構造追加
- [ ] ズームレベルに応じた表示切り替え
- [ ] モード切替UI実装

**技術実装:**
- データベーススキーマ拡張
- 地理データ（都道府県・市町村境界線）の追加

**ラベル:** `enhancement`, `high-priority`, `data-modeling`

---

### Issue #3: GPS位置情報取得・現地滞在確認システム

**現在の状況:**
- 位置情報取得機能なし
- 滞在時間確認機能なし

**要件定義からの引用:**
> - **共通解禁条件**: 現地5分間滞在 + 証明写真投稿
> - **位置確認**: GPS による正確な現地滞在確認

**受け入れ基準:**
- [ ] GPS位置情報取得実装
- [ ] 5分間滞在時間の計測機能
- [ ] 位置精度の検証機能
- [ ] バックグラウンド位置追跡

**技術実装:**
```javascript
// Geolocation API with high accuracy
navigator.geolocation.watchPosition(callback, {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0
});
```

**ラベル:** `enhancement`, `high-priority`, `geolocation`

---

### Issue #4: 写真撮影・AI認証システム（Dify連携）

**現在の状況:**
- 写真撮影機能なし
- AI位置認証なし

**要件定義からの引用:**
> - **写真認証**: AI による位置情報との整合性チェック
> - **Dify（特化用途）**: 写真位置認証（AI画像解析）

**受け入れ基準:**
- [ ] カメラ機能実装
- [ ] 写真アップロード機能
- [ ] Dify APIとの連携
- [ ] AI位置認証結果の処理

**技術実装:**
- Web API: `navigator.mediaDevices.getUserMedia()`
- Dify API連携: Cloud Functions経由

**ラベル:** `enhancement`, `high-priority`, `ai-integration`

---

## 📈 中優先度 - UX改善

### Issue #5: ホーム画面のゼルダ風ミニマップ実装

**現在の状況:**
- 統計情報のみ表示（src/pages/Home.tsx）
- ミニマップ機能なし

**要件定義からの引用:**
> - **現在地周辺マップ**: ゼルダ風ミニマップ表示

**受け入れ基準:**
- [ ] 現在地中心のミニマップ表示
- [ ] ゼルダ風デザインの実装
- [ ] 周辺解禁エリアのハイライト

**ラベル:** `enhancement`, `medium-priority`, `ui-ux`

---

### Issue #6: 現在地周辺おすすめスポット提案機能

**現在の状況:**
- おすすめスポット提案なし

**要件定義からの引用:**
> - **おすすめスポット**: 近隣の未解禁エリア提案

**受け入れ基準:**
- [ ] 現在地から近い未解禁エリアの検出
- [ ] 距離・アクセス性を考慮した提案
- [ ] ルート提案機能

**ラベル:** `enhancement`, `medium-priority`, `recommendation`

---

### Issue #7: チーム機能（最大4人、色分け表示）

**現在の状況:**
- チーム機能なし
- データモデルにチーム概念なし

**要件定義からの引用:**
> - **最大人数**: 4人（視認性と管理負荷を考慮）
> - **表示方法**: メンバー別色分けでマップ表示
> - **協力要素**: チーム全体の進捗共有

**受け入れ基準:**
- [ ] チーム作成・参加機能
- [ ] メンバー別色分け表示
- [ ] チーム進捗共有機能
- [ ] リアルタイム同期

**技術実装:**
- Supabaseのリアルタイム機能活用
- チーム用データベーステーブル設計

**ラベル:** `enhancement`, `medium-priority`, `team-feature`

---

### Issue #8: 解禁演出・サウンドシステム

**現在の状況:**
- 基本的なアニメーションのみ（framer-motion）
- サウンド機能なし

**要件定義からの引用:**
> - **イージーモード**: 基本演出・サウンド
> - **ノーマルモード**: 高品質演出・専用サウンド  
> - **ハードモード**: 最高品質演出・限定サウンド

**受け入れ基準:**
- [ ] モード別演出システム
- [ ] サウンドエフェクト実装
- [ ] アニメーション品質向上

**ラベル:** `enhancement`, `medium-priority`, `audio-visual`

---

## 🔧 低優先度 - データ・インフラ

### Issue #9: Supabaseデータベーススキーマの拡張

**現在の状況:**
- 基本的なテーブル構造のみ
- 地理データベース機能なし

**要件定義からの引用:**
> ```
> users/{userId}
>   ├─ profile: {name, email, premiumStatus, createdAt}
>   ├─ unlockedAreas: {areaId: {unlockedAt, photoUrl, mode}}
>   └─ stats: {totalDistance, unlockedCount, teamId}
> ```

**受け入れ基準:**
- [ ] PostGIS拡張の有効化
- [ ] 地理データベーステーブル設計
- [ ] インデックス最適化
- [ ] バックアップ戦略

**ラベル:** `enhancement`, `low-priority`, `database`

---

### Issue #10: ヘルスケアデータ連携（歩数等）

**現在の状況:**
- 固定値での表示（todaySteps = 8547）
- 実際のヘルスケア連携なし

**要件定義からの引用:**
> - **今日の歩数**: ヘルスケア連携

**受け入れ基準:**
- [ ] Web版でのActivity API対応検討
- [ ] 外部ヘルスアプリとの連携
- [ ] 歩数データの可視化

**ラベル:** `enhancement`, `low-priority`, `health-integration`

---

### Issue #11: プレミアムプラン・決済システム

**現在の状況:**
- 決済機能なし
- プレミアム判定ロジックなし

**要件定義からの引用:**
> - **月額**: 580円
> - **Stripe + Revenue Cat**: アプリ内課金管理

**受け入れ基準:**
- [ ] Stripe決済連携
- [ ] サブスクリプション管理
- [ ] プレミアム機能制御

**ラベル:** `enhancement`, `low-priority`, `monetization`

---

### Issue #12: 実績・バッジシステムの拡張

**現在の状況:**
- 基本的な実績データのみ（src/data/achievements.ts）
- 動的な実績判定なし

**要件定義からの引用:**
> - **制覇系**: 〇〇地方完全制覇、〇〇県完全制覇、全国制覇等
> - **探索系**: 連続訪問、最北端・最南端到達、離島制覇
> - **ソーシャル系**: チーム協力、友達招待、合同解禁

**受け入れ基準:**
- [ ] 動的実績判定システム
- [ ] バッジ画像・アニメーション
- [ ] 実績通知システム

**ラベル:** `enhancement`, `low-priority`, `gamification`

---

## 🔄 技術課題・その他

### Issue #13: React Native移行の検討

**現在の状況:**
- Vite + React（Web版）
- モバイル最適化が不十分

**要件定義からの引用:**
> **React Native（推奨）**: クロスプラットフォーム開発でコスト削減、豊富な位置情報ライブラリ

**受け入れ基準:**
- [ ] React Native移行可能性調査
- [ ] 位置情報精度の比較検証
- [ ] 開発コスト・期間の見積もり

**ラベル:** `research`, `technical-debt`, `platform`

---

### Issue #14: パフォーマンス最適化

**現在の状況:**
- 基本実装のみ
- 大規模データ処理の最適化なし

**技術課題:**
- 大量の地理データ処理
- リアルタイム位置追跡の最適化
- 写真アップロード・ストレージ最適化

**受け入れ基準:**
- [ ] 地図描画パフォーマンス向上
- [ ] データ読み込み最適化
- [ ] バンドルサイズ最適化

**ラベル:** `performance`, `optimization`

---

## 📋 使用方法

1. 各Issueを https://github.com/users/Morohashi0409/projects/2 で作成
2. 優先度に応じてラベルを設定
3. プロジェクトボードで進捗管理
4. 受け入れ基準をチェックリスト形式で管理

## 🎯 推奨実装順序

1. **Phase 1**: Issue #1, #2, #3（Core Map機能）
2. **Phase 2**: Issue #4, #5, #6（基本UX完成）
3. **Phase 3**: Issue #7, #8（ソーシャル・演出）
4. **Phase 4**: Issue #9〜#12（データ・システム強化）
